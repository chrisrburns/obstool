{% extends "base_site.html" %}
{% load myfilters %}
{% block style %}
  <script src="/media/js/sorttable.js"></script>
  <script type="text/javascript" src="/media/js/paper.js"></script>
  <script type="text/paperscript" canvas="myCanvas">
     var cent = view.center;
     var width = cent.x*2;
     var height = cent.y*2;
     var tel_width = 30;
     var tel_length = width/2-20;
     var dome = new Path.Circle({
        center: cent,
        radius: width/2-10,
        strokeColor: 'black'
     });
     var ll = new Point(0,height/2); var ur = new Point(width,height);
     var rect = new Rectangle(ll, ur);
     var blk = new Path.Rectangle(rect);
     blk.fillColor = 'white'
     var rect = new Rectangle(new Point(10,height/2), new Point(width-10,height-80));
     var bot = new Path.Rectangle(rect);
     bot.strokeColor = 'black';
     var rect = new Rectangle(new Point(cent.x-10, cent.y-tel_width/2), 
                              new Point(cent.x+tel_length,cent.y+tel_width/2));
     var tel = new Path.Rectangle(rect);
     tel.strokeColor='black';
     tel.rotate(-{{ object.altitude}}, cent);

  </script>
{% endblock %}

{% block breadcrumbs %}
  <div class="breadcrumbs">
     <a href="../../index.html">Home</a> &rsaquo;
     <a href="..">Object Listing</a> &rsaquo;
     {{ object.name }} 
  </div> 
{% endblock %}

{% block pretitle %} 
  <h2> {{ object.name }} </h2> 
{% endblock %}
{% block content %}
  <div id="content-main" style="width:300px;float: left;">
    <h1> RA:  {{ object.PrecRAh }}<br>
         DEC: {{ object.PrecDecd }}<br>
         HA: {{ object.hour_angle|format:"%.1f" }} hr<br>
         AZ:  {{ object.azimuth|format:"%.2f" }}&deg;<br>
         ALT:  {{ object.altitude|format:"%.2f" }}&deg;<br>
    </h1>
    <P>
    <form action="" method="post">{% csrf_token %}
       {% if tel_status == "SLEW" %}
       <font color='red'>{{ az_move }}</font><br>
          <input type='submit' name='action' value='Sync'>
          <input type='submit' name='action' value='Cancel'>
       {% else %}
          <input type='submit' name='action' value='GOTO'>
       {% endif %}
    </form>
    <table cellspacing="0" border=0>
       <tr><td>Description:</td><td> {{ object.descr }}</td></tr>
       <tr><td>Type:</td><td> {{ object.objtype }}</td></tr>
       <tr><td>RA/DEC (J2000): </td><td> {{ object.RA|angle2hms }} 
                                        {{ object.DEC|angle2dms }} </td></tr>
       <tr><td>Size: </td><td> {{ object.ssize }} </td></tr>
       <tr><td>Vmag: </td><td> {{ object.sMv }} </td></tr>
       <tr><td>Distance: </td><td> {{ object.sdistance }} </td></tr>
       <tr><td>Dark Sky?: </td><td> {% if obj.dark %}D{% endif %} </td></tr>
       <tr><td>Rating: </td><td> {{ object.srating|safe }} </td></tr>
    </table>
    <br>
    {% if message %}
       <div style="background: #eeffcc;"> 
          <img src="/media/img/admin/icon_success.gif"> 
             &nbsp;&nbsp;{{ message }} 
       </div>
    {% endif %}
    {% if error %}
      <div style="background: red; color: white;">
        <img src="/media/img/admin/icon_alert.gif"> 
          &nbsp;&nbsp; {{ error }} 
      </div>
    {% endif %}
  </div>
  <div style="width:310px; float:left;">
     <a href="finder">
        <img src="finder{{extras}}" width=300>
     </a>
     <br><font size=-2>{{ finder_size }}X{{ finder_size }} 
        arc-minutes.<br>Orientation: {{ finder_orientation }}</font>
     <form action="" method="post">{% csrf_token %}
        {% for key,value in eyepieces.items %}
           <input type='submit' name='eyepiece' 
              value="{{ key }}"
              {%if cur_eyepiece == key %} disabled {% endif %}
              >
        {% endfor %}
     </form>
  </div>
  <div id="content-related" style="margin-right: -25em;">
    <div class="module" id="tinfo">
       <h2>Telescope Position</h2>
       <table border=0>
          <tr>
             <td>RA:</td><td> {{ tel_RA }} </td>
          </tr>
          <tr>
             <td>DEC:</td><td> {{ tel_DEC }} </td>
          </tr>
          <tr>
             <td>HA:</td><td> {{ tel_ha }} </td>
          </tr>
          <tr>
             <td>Alt:</td><td> {{ tel_alt }}&deg; </td>
          </tr>
          <tr>
             <td>Az:</td><td> {{ tel_az }}&deg;</td>
          </tr>
       </table>
       <br>
    </div>
    <div class="module" id="canvas">
       <canvas id="myCanvas" width=216 height=216></canvas>
    </div>
  </div>
{% endblock %}
